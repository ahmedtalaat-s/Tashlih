<div class="main-wrapper" dir="rtl">
  <div class="right-panel">
    <div class="top-nav">
      <button class="back-btn" aria-label="Back">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="black"
          stroke-width="2.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="m9 18 6-6-6-6" />
        </svg>
      </button>
    </div>

    <div class="content-area">
      <div class="logo-container">
        <img src="./assets/images/icons/logo.png" alt="Tashleeh Logo" />
      </div>

      <div class="content-wrapper">
        <div class="text-section">
          <h1 class="main-heading">سجل من خلال رقمك</h1>
          <p class="description">حدد دورك للاستفادة من خدمات التطبيق المختلفة</p>
        </div>

        <form class="form-section" [formGroup]="loginForm" (ngSubmit)="submit()">
          <!-- Phone -->
          <div class="form-group">
            <div class="phone-input-group">
              <div class="country-code">
                <span dir="ltr">+966</span>
                <img src="assets/images/saudi-arabia.svg" alt="SA" class="flag-icon" />
              </div>
              <div class="input-box">
                <input
                  id="phone"
                  type="tel"
                  formControlName="phone"
                  placeholder="5-XXXX-XXXX"
                  maxlength="9"
                  class="phone-input"
                />
              </div>
            </div>
            @if (loginForm.controls.phone.touched && loginForm.controls.phone.invalid) {
            <small class="error">رقم الهاتف غير صحيح</small>
            }
          </div>

          <!-- Password -->
          @if (loginWithPassword()) {
          <div class="form-group">
            <div class="input-box">
              <input
                id="password"
                type="password"
                formControlName="password"
                placeholder="كلمة المرور"
                class="password-input"
              />
            </div>
            @if (loginForm.controls.password.touched && loginForm.controls.password.invalid) {
            <small class="error">كلمة المرور مطلوبة (6 أحرف على الأقل)</small>
            }
          </div>
          }

          <!-- Submit -->
          <button class="submit-button" type="submit">تسجيل الدخول</button>

          <!-- Toggle -->
          <button type="button" class="link-button" (click)="toggleLoginMethod()">
            {{ loginWithPassword() ? 'الدخول باستخدام رمز التحقق' : 'الدخول باستخدام كلمة المرور' }}
          </button>

          <!-- Signup -->
          <div class="signup-link">
            <span class="signup-text">ليس لدي حساب؟</span>
            <button class="link-button">إنشاء الحساب</button>
          </div>
        </form>
      </div>
    </div>

    <div class="footer">
      <div class="copyright-text">جميع الحقوق محفوظة. <span class="brand">Tashleeh</span>©</div>
      <button class="lang-switcher">
        English
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="m5 8 6 6" />
          <path d="m4 14 6-6 2-3" />
          <path d="M2 5h12" />
          <path d="M7 2h1" />
          <path d="m22 22-5-10-5 10" />
          <path d="M14 18h6" />
        </svg>
      </button>
    </div>
  </div>

  <div class="left-panel">
    <img src="./assets/images/login.svg" class="illustration" alt="Welcome Illustration" />
  </div>
</div>

@if (showOtp()) {
<app-check-otpcode (verify)="handleOtpLogin($event)" (close)="closeOtp()"> </app-check-otpcode>
}
