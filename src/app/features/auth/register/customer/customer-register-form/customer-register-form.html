<div class="main-wrapper" dir="rtl">
  <div class="right-panel">
    <div class="top-nav">
      <button class="back-btn" aria-label="Back" routerLink="/auth/register/choose-account">
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="black"
          stroke-width="2.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="m9 18 6-6-6-6" />
        </svg>
      </button>
    </div>

    <div class="content-area">
      <div class="logo-container">
        <img src="./assets/images/icons/logo.png" alt="Tashleeh Logo" />
      </div>

      <div class="header-text">
        <h1>إنشاء حساب عميل</h1>
        <p>حدد دورك للاستفادة من خدمات التطبيق المختلفة</p>
      </div>

      <form [formGroup]="registerForm" (ngSubmit)="submit()">
        <!-- Full Name -->
        <div class="input-box">
          <!-- icon -->
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
            <circle cx="12" cy="7" r="4" />
          </svg>

          <input type="text" placeholder="اسمك بالكامل" formControlName="fullName" />
        </div>

        @if (hasError('fullName','required')) {
        <small class="error"> الاسم مطلوب </small>
        } @if (hasError('fullName','minlength')) {
        <small class="error"> الاسم يجب أن يكون 3 حروف على الأقل </small>
        }
        <!-- Phone -->
        <div class="phone-input-group">
          <div class="country-code">
            <span dir="ltr">+966</span>
            <img src="assets/images/saudi-arabia.svg" alt="Saudi Arabia" class="flag-icon" />
          </div>
          <div class="phone-input-wrapper">
            <div class="input-box">
              <svg
                _ngcontent-ng-c3369730433=""
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  _ngcontent-ng-c3369730433=""
                  d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                ></path>
              </svg>

              <input
                type="tel"
                placeholder="رقم الهاتف"
                maxlength="9"
                pattern="[0-9]*"
                formControlName="phone"
              />
            </div>
          </div>
        </div>

        @if (hasError('phone','required')) {
        <small class="error"> رقم الجوال مطلوب </small>
        } @if (hasError('phone','pattern')) {
        <small class="error"> رقم الجوال يجب أن يبدأ بـ 5 ويتكون من 9 أرقام </small>
        }

        <!-- email -->
        <div class="input-box">
          <svg
            width="21"
            height="21"
            viewBox="0 0 21 21"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M19.251 6.12488L11.3839 11.136C11.1169 11.2911 10.8136 11.3727 10.5049 11.3727C10.1962 11.3727 9.89294 11.2911 9.62598 11.136L1.75098 6.12488M3.50098 3.49988H17.501C18.4675 3.49988 19.251 4.28338 19.251 5.24988V15.7499C19.251 16.7164 18.4675 17.4999 17.501 17.4999H3.50098C2.53448 17.4999 1.75098 16.7164 1.75098 15.7499V5.24988C1.75098 4.28338 2.53448 3.49988 3.50098 3.49988Z"
              stroke="#999999"
              stroke-width="1.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>

          <input type="email" placeholder="البريد الإلكتروني" formControlName="email" />
        </div>

        @if (hasError('email','required')) {
        <small class="error"> البريد الإلكتروني مطلوب </small>
        } @if (hasError('email','email')) {
        <small class="error"> البريد الإلكتروني غير صحيح </small>
        }

        <!-- Password -->
        <div class="input-box">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="11" width="18" height="11" rx="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>

          <input
            [type]="showPassword() ? 'text' : 'password'"
            placeholder="كلمة المرور"
            formControlName="password"
          />
          <!-- Eye Toggle -->
          <button
            type="button"
            class="password-toggle"
            (click)="togglePassword()"
            [attr.aria-label]="showPassword() ? 'إخفاء كلمة المرور' : 'إظهار كلمة المرور'"
          >
            @if (showPassword()) {
            <!-- Eye Off -->
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                d="M17.94 17.94A10.94 10.94 0 0 1 12 20
             c-7 0-11-8-11-8
             a21.81 21.81 0 0 1 5.06-6.88"
              />
              <path
                d="M9.9 4.24A9.12 9.12 0 0 1 12 4
             c7 0 11 8 11 8
             a21.81 21.81 0 0 1-4.87 6.36"
              />
              <path d="M14.12 14.12a3 3 0 1 1-4.24-4.24" />
              <path d="M1 1l22 22" />
            </svg>
            } @else {
            <!-- Eye -->
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            }
          </button>
        </div>

        @if (hasError('password','required')) {
        <small class="error"> كلمة المرور مطلوبة </small>
        } @if (hasError('password','minlength')) {
        <small class="error"> كلمة المرور يجب أن تكون 8 أحرف على الأقل </small>
        }
        <!--confirm Password -->
        <div class="input-box">
          <svg
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="11" width="18" height="11" rx="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>

          <input
            [type]="showConfirmPassword() ? 'text' : 'password'"
            placeholder="تأكيد كلمة المرور"
            formControlName="confirmPassword"
          />
          <!-- Eye Toggle -->
          <button
            type="button"
            class="password-toggle"
            (click)="toggleConfirmPassword()"
            [attr.aria-label]="showConfirmPassword() ? 'إخفاء كلمة المرور' : 'إظهار كلمة المرور'"
          >
            @if (showConfirmPassword()) {
            <!-- Eye Off -->
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                d="M17.94 17.94A10.94 10.94 0 0 1 12 20
             c-7 0-11-8-11-8
             a21.81 21.81 0 0 1 5.06-6.88"
              />
              <path
                d="M9.9 4.24A9.12 9.12 0 0 1 12 4
             c7 0 11 8 11 8
             a21.81 21.81 0 0 1-4.87 6.36"
              />
              <path d="M14.12 14.12a3 3 0 1 1-4.24-4.24" />
              <path d="M1 1l22 22" />
            </svg>
            } @else {
            <!-- Eye -->
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            }
          </button>
        </div>
        @if (hasError('confirmPassword','required')) {
        <small class="error"> كلمة المرور مطلوبة </small>
        } @if (registerForm.hasError('passwordMismatch') &&
        registerForm.get('confirmPassword')?.touched) {
        <small class="error"> كلمة المرور غير متطابقة </small>
        }

        <!-- Terms -->
        <div class="terms-box">
          <input type="checkbox" id="terms" formControlName="terms" />
          <label for="terms">
            الموافقة علي <strong>شروط الأحكام</strong> والموافقة علي <strong>سياسة الخصوصية</strong>
          </label>
        </div>

        @if (hasError('terms','required')) {
        <small class="error"> يجب الموافقة على الشروط </small>
        }

        <!-- Submit -->
        <button type="submit" class="submit-btn" [disabled]="isFormInvalid()">تسجيل</button>

        <div class="login-footer">
          <span>لدي حساب بالفعل؟</span>
          <a href="">تسجيل الدخول</a>
        </div>
      </form>
    </div>

    <div class="footer">
      <div class="copyright-text">جميع الحقوق محفوظة. <span class="brand">Tashleeh</span>©</div>
      <button class="lang-switcher">
        English
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="m5 8 6 6" />
          <path d="m4 14 6-6 2-3" />
          <path d="M2 5h12" />
          <path d="M7 2h1" />
          <path d="m22 22-5-10-5 10" />
          <path d="M14 18h6" />
        </svg>
      </button>
    </div>
  </div>

  <div class="left-panel">
    <img
      src="./assets/images/customer-register.svg"
      class="illustration"
      alt="Welcome Illustration"
    />
  </div>
</div>

@if (showOtpCheck()) {
<app-check-otpcode (verify)="handleOtpVerify($event)" (close)="closeOtp()"></app-check-otpcode>
}
