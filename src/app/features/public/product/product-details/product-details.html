@if (product) {
  <div class="container">
    <header>
      <h2>تفاصيل القطعة</h2>
      <div class="header-actions">
        <button
          class="action-btn heart-btn"
          (click)="toggleFavorite()"
          [class.isfavorite]="isFavorite(product.id)"
        >
          <lucide-icon [img]="HeartIcon" size="18"></lucide-icon>
        </button>
        <button class="action-btn">
          <lucide-icon [img]="ShareIcon" size="18"></lucide-icon>
        </button>
      </div>
    </header>

    <main class="product-main">
      <!-- INFO PANEL -->
      <div class="info-panel">
        <div class="date-badge">
          <lucide-icon [img]="CalendarIcon" size="14"></lucide-icon>
          {{ product.createdAt | date: 'dd MMMM yyyy' }}
        </div>

        <h1 class="product-title">{{ product.nameAr }}</h1>

        <div class="price" [innerHTML]="product.price | saudiRiyal">
          {{ product.price }}
        </div>

        <div class="description-box">
          <div class="desc-header">
            <lucide-icon [img]="FileTextIcon" size="16"></lucide-icon>
            الوصف
          </div>
          <p class="desc-text">
            {{ product.description }}
          </p>
        </div>

        <div class="specs-row">
          <div class="spec-item">
            <span>{{ product.conditionAr }}</span>
            <span class="spec-label">
              الحالة <lucide-icon [img]="WrenchIcon" size="14"></lucide-icon>
            </span>
          </div>

          <div class="spec-item">
            <span>{{ product.quantity }}</span>
            <span class="spec-label">
              الكمية <lucide-icon [img]="BoxIcon" size="14"></lucide-icon>
            </span>
          </div>
        </div>

        <button class="chat-btn btn-yellow">
          محادثة <lucide-icon [img]="ChatIcon" size="18"></lucide-icon>
        </button>

        <button class="chat-btn btn-white">
          اتصال <lucide-icon [img]="PhoneIcon" size="18"></lucide-icon>
        </button>
      </div>

      <!-- MAIN IMAGE -->
      <div class="main-image">
        @if (selectedImage) {
          <img [src]="selectedImage" alt="part image" />
        } @else {
          <lucide-icon [img]="ImageIcon" size="22"></lucide-icon>
        }
      </div>

      <!-- THUMBNAILS -->
      <div class="thumbnails">
        @for (img of product.images; track img.id) {
          <div
            class="thumb"
            [class.active]="img.imageUrl === selectedImage"
            (click)="selectImage(img.imageUrl)"
          >
            <img [src]="img.thumbnailUrl || img.imageUrl" />
          </div>
        }
      </div>
    </main>

    <!-- RELATED -->
    <div class="related-header">قطع أخرى لنفس المورد</div>
    <div class="related-grid">
      @for (related of relatedProducts; track related.id) {
        <app-product-card [product]="related"></app-product-card>
      }
    </div>
    <!-- (جاهز تربطه endpoint لاحقًا) -->
  </div>
}
